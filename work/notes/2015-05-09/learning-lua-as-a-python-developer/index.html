<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Bugra Akyildiz">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Learning Lua as a Python Developer | Bugra Akyildiz</title>

        <link rel="alternate" type="application/atom+xml" title="Bugra Akyildiz blog atom feed" href="/feeds/all.atom.xml" />
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"type="text/javascript"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

    </head>

  <body>
      <div id="logo"><a href="/" class="at"></a></div>
      <div id="mln-io"><a href="http://www.mln.io/">Machine Learning Newsletter</a></div>

  <div id="content">
    <div class="post">
      <div class="post-content">
<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
</script>
<div class="post">
    <article>
        <header>
            <h1>Learning Lua as a Python Developer</h1>
        </header>
        <div class='post-content'>
            <p>This tutorial is not the millionth tutorial that walks you through 
basic concepts of Lua language. First there are quite excellent 
<a href="http://tylerneylon.com/a/learn-lua/">tutorials</a>
that actually aims to do exactly that. This post would be to tell a tutorial on Lua
from a Pythonista, comparing Lua features with various Python features and try
to create various associations. Make no mistake, I will actually go through
basic concepts but somehow comparing the Lua with Python all the time. I think
these two languages are very similar in various aspects and those associations
may make the learning curve a little bit smoother.</p>
<p>(If you ask me the steeper the learning curve is better, as the slope is how 
<em>fast</em> you could learn(x axis is time). The steeper curve has higher slope, 
therefore you could learn faster. Not sure why steeper learning curve has 
connotation of hard concepts or hard to understand material. Contrarily, we 
should say steeper learning curve for easy concepts. But, hey. Nobody claimed 
that the languages are and should be consistent.)</p>
<p>Anyways, where was I? Yes, Lua it is. And of course Python. Making comparisons 
between languages not only makes you remember the syntax easily but also you could
get a feeling of the language if the two languages are very similar in various
aspects. If you learned Java as a your first language, then whenever you learn an
OOP(Object Oriented Programming) focused programming language, you would get the 
same feeling. Classes and objects are kind of big deal. You’d better use it 
wherever you can. </p>
<p>But let’s step back for a second. Why Lua? It is compact, fast and dynamic. It is 
somehow easy to learn. You could also list a bunch of advantages of Lua as well, but
my reason was quite pragmatist if there is a spectrum of reasons why you learn a
new programming language. My aim is to learn more about tools in Deep Learning and
more specifically <a href="http://torch.ch/">Torch</a>. </p>
<p>And Lua is all good, huh? Not really. It is not very popular so community support 
is not there and not good comparing to Python. The standard library is not very 
large. From Python’s batteries included approach, it gets hard to get used to 
DIY(Do It Yourself) from there should be a library for that if it does not exist
in the standard library already. </p>
<h2>Similarities</h2>
<h3>Strings</h3>
<p>String definitions are same, <code>’</code> or <code>”</code> works and they do not have any difference.
Python uses <code>”””</code> for multi-line strings and Lua uses <code>[[]]</code>. Strings are immutable
and can be concatenated to each other. Lua uses <code>..</code> as concatenation operator
where Python uses good old plus operator <code>+</code>. <code>len</code>, <code>split</code> and various functions
in string module works as in the same way in Python. </p>
<h3>Logical Operators</h3>
<p><code>not</code>, <code>and</code>, <code>or</code> works in the same way as you expect. Only difference is <code>nil</code> and
<code>false</code> are evaluated as <code>false</code> in Lua where in Python empty string, list, set and
even 0 are evaluated as <code>False</code>.</p>
<h3>Table usage</h3>
<p>Table syntax and usage of sets and lists are very similar to Python. </p>
<div class="highlight"><pre><span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="err">‘</span><span class="n">first_key</span><span class="err">’</span><span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="err">‘</span><span class="n">second_key</span><span class="err">’</span><span class="o">=</span> <span class="mi">20</span><span class="p">}</span>
<span class="n">list</span> <span class="o">=</span> <span class="p">{</span><span class="err">‘</span><span class="n">a</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">b</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">c</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">d</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">e</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">f</span><span class="err">’</span><span class="p">}</span> <span class="c1">-- They get automatically 1 upto 6 as keys</span>
<span class="c1">-- Under the hood it is still an associative array</span>
</pre></div>


<h3><code>print</code> and <code>type</code> functions</h3>
<p>They behave exactly the same way as in Python. You could get the type information
via <code>type</code> function and print out the results with <code>print</code> function.</p>
<h3>No braces and semicolons</h3>
<p>There are no braces and semicolons. They made the compromise on the end keyword
which is understandable. As long as developer adheres the indentation for his
function definition and programming style, then it should be as readable as Python.</p>
<h3>There is one way and prefereably only one way to do things</h3>
<p>Since the language is compact and somehow barebone, there is generally only one
way of doing things. Actually, sometimes there is not.(e.g. getting keys from a table)
This makes it easy to read the code that other people wrote if they have not exploited
the metatables quite a lot.</p>
<h3>Explicit <code>self</code>s</h3>
<p>Both languages use explicit selfs in function definition. Lua even attempts to pass
the object in a regular function call(so much object oriented after all). However,
it provides a syntactic sugar which I will show in a bit.</p>
<h3>Multiple Return values and multiple assignment</h3>
<p>Both languages support returning multiple values in functions and you could assign
multiple assignment as well.
In Lua, it looks like this:</p>
<div class="highlight"><pre><span class="n">first_table</span><span class="p">,</span> <span class="n">second_table</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{}</span>
<span class="n">first_table</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="err">“</span><span class="n">first_value</span><span class="err">”</span>
<span class="n">first_table</span><span class="p">,</span> <span class="n">second_table</span> <span class="o">=</span> <span class="n">second_table</span><span class="p">,</span> <span class="n">first_table</span>
</pre></div>


<p>If there are more variables in the right hand side than the left hand side in the
assignment operation, then Lua errors where Python raises <code>ValueError</code> exception, 
though.</p>
<h3>Both Languages support <code>unpack</code>ing lists</h3>
<p>If you have a function, you could put all of the parameters into a list and then
<code>unpack</code> them in Lua where in Python you would use <code>*</code> prefix to the list to unpack.</p>
<p>In Lua, the following</p>
<div class="highlight"><pre><span class="n">func</span><span class="p">(</span><span class="nb">unpack</span><span class="p">(</span><span class="n">list</span><span class="p">))</span>
</pre></div>


<p>is similar to</p>
<div class="highlight"><pre><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">ls</span><span class="p">)</span>
</pre></div>


<p>in Python.</p>
<h3>Enumeration on <code>table</code>s or dictionaries</h3>
<p>Both languages provide a way to traverse lists with enumerated version. This holds
true for dictionary or table as well.</p>
<p>In Lua, one could call <code>pairs</code> in the table to traverse both key-value in the table.
If you call <code>ipairs</code> in the list, then you would get the enumerated indices along
with the values that are in the list.</p>
<h3>Iterators gonna iterate</h3>
<p><code>for</code> can be used for iterators in both languages. One can also define custom
iterators as well which could be used in the for construct as well, which is pretty
nice.</p>
<h2>Differences</h2>
<h3>Whitespace vs <code>end</code> keyword</h3>
<p>Lua opts in using <code>end</code> keyword for ending function definition or for loop where
Python uses whitespace for function definition, control flows and so on.</p>
<h3>Functions</h3>
<p>Function definitions are somehow similar to Javascript dropping <code>{}</code> in favor of 
<code>end</code> keyword.</p>
<div class="highlight"><pre><span class="k">function</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>


<div class="highlight"><pre><span class="n">factorial</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>


<p>could be also assigned to a variable similar to Javascript. You could define
anoymous functions and assign them into a variable in Python to be fair. But 
more ofthen than not, people just pass the function itself rather than the variable
that is assigned to.</p>
<h3>Variable Scope</h3>
<p>All of the variables are defaulted as global variables. Not sure why the language
creators thought this is a good idea, but you could explicitly put <code>local</code> keyword
in front of the variable declaration to make it “local”. Contrarily, you could 
explicitly make a global variable putting <code>global</code> in front of the variable 
declaration.</p>
<h3>Tables vs Dictionaries, Lists and Sets</h3>
<p>In Lua, we trust tables, Python needs to bring dictionaries, lists and sets. Tables
are the only compound data structure(did anyone tell that Lua is a very compact
language). Tables are associative arrays similar to dictionaries in Python, but
they could be also used as lists(defaulting the keys as integers).</p>
<h3><code>x,y</code> “range” syntax includes beginning and end-point</h3>
<p>The tables when they are used as lists, start indexing at 1. When you define
a range of integers using <code>1,100</code>, which produces 100 integers from 1 upto 100 
including 1 and 100. If you have the list, you could get the length of the list
via <code>#list</code>.</p>
<h3>Objects</h3>
<p>Lua does not support object oriented programming. They provide certain ways of 
doing OOP, similar to Javascript’s prototype based style, but even that requires
somehow different syntax to call the object. Of course, there is no object by the
way. It is a table which you could call functions from it. You could add almost
any behavior on tables via “metatables” though. </p>
<div class="highlight"><pre><span class="k">function</span> <span class="nf">object</span><span class="p">:</span><span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">end</span>
</pre></div>


<p>is nothing but a syntactic sugar for the following for example:</p>
<div class="highlight"><pre><span class="n">object</span><span class="p">.</span><span class="n">func</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
                <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
              <span class="k">end</span>
</pre></div>


<h3>Lua is fast</h3>
<p>I meant LuaJIT is fast. Comparing to Python, it is quite faster, which is important
if you are doing expensive numerical operations. Considering its dynamic nature, this
is a little surprise to me,but it is a good surprise. </p>
<h3>Lua assigns <code>nil</code> when a variable is not defined</h3>
<p>If you are accessing a variable that you did not define in Lua, it does not error,
it silently assigns a <code>nil</code> to the variable and does not complain where you would 
get a <code>NameError</code> in Python. In general, since most of the things are tables and 
if you access a non-existent key to the table, it simply returns <code>nil</code>, there would
be less explicit error or exception but rather nil checking for those statements 
if the key actually exists in the first place in the table.</p>
<h3>Lua does proper tail recursion</h3>
<p>Lua does proper tail recursion where Python does not. </p>
        </div>
    </article>
          <ul class="social-media-links" style="text-align: center;">
            <li class="twitter" style="display:inline;">
            <a href="https://twitter.com/share" i
              class="twitter-share-button"
              data-url="http://bugra.github.io/work/notes/2015-05-09/learning-lua-as-a-python-developer/"
              data-via="bugraa">Tweet</a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
              </li>
           <li class="fb-like" style="display:inline;">
              <div class="fb-share-button" data-href="http://developers.facebook.com/docs/plugins/" data-width="32" data-type="button_count"></div>
           </li>
           <li class="google-plus" style="display:inline;">
             <!-- Place this tag where you want the +1 button to render. -->
             <div class="g-plusone" data-size="medium"></div>

             <!-- Place this tag after the last +1 button tag. -->
             <script type="text/javascript">
                 (function() {
                       var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                           po.src = 'https://apis.google.com/js/platform.js';
                               var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                                 })();
             </script>
           </li>
             <li class="pinterest" style="display:inline;">
               <a href="//www.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark"  data-pin-shape="round" data-pin-height="32"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_round_red_32.png" /></a><!-- Please call pinit.js only once per page --><script type="text/javascript" async src="//assets.pinterest.com/js/pinit.js"></script>
               </a>
             </li>
           </li>
         </ul>
    <div class="metadata">

        <div class="left">
            <ul>
                <li>
                    <strong>Published: </strong>
                    <i>
                        <time datetime="2015-05-09T00:00:00+00:00">
                            May 09, 2015
                        </time>
                    </i>
                </li>
                </li>
            </ul>
        </div>

        <div class="right">
            <ul>
                <li><a href="/">Home</a></li>
            </ul>
        </div>

    </div>

</div>

    <div id="disqus_thread"></div>
      <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'bugra'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
</div>

    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="https://yui.yahooapis.com/pure/0.3.0/base-min.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href="/theme/css/pygments.css">
        <link rel="stylesheet" href="/theme/css/main.css">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

      <!-- Timesheet JS and CSS -->
      <script src="/theme/js/timesheet.js"></script>
      <script src="/theme/js/timesheet.bubble.js"></script>
      <script type='text/javascript'>new Timesheet('timesheet', 2008, 2020, [
  ['09/2006', '05/2011', 'B.S Electrical Engineering at Bilkent University', 'dolor'],
  ['06/2009', '09/2009', 'Software Developer Intern at Optisis Inc.', 'dolor'],
  ['06/2010', '09/2010', 'Software Developer Intern at Tubitak R&D', 'dolor'],
  ['06/2011', '09/2011', 'Research Internship at Koc University', 'dolor'],
  ['09/2011', '05/2013', 'M.S Electrical and Computer Engineering at NYU', 'lorem'],
  ['12/2012', '05/2013', 'Part-Time Software Developer at Viacom', 'lorem'],
  ['05/2013', '12/2013', 'Algorithms Engineer at dMetrics Inc.', 'ipsum'],
  ['12/2013', '12/2014', 'Machine Learning Engineer at CB Insights', 'ipsum'],
  ['12/2014', '08/2015', 'Data Scientist at Axial', 'ipsum'],
  ['08/2015', '01/2016', 'Senior Machine Learning Engineer', 'ipsum'],
  ['03/2014', '2/2015', 'Consultant in Text and Time Series Analysis', 'default']
]);</script>
      <!-- Timesheet End -->
      <script src="/theme/js/logo.js"></script>
      <script src="https://d3js.org/d3.v3.min.js"></script>
      <script src="/theme/js/scramble.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
      <script type="text/javascript">init();</script>
      <script>
        emailScramble = new scrambledString(document.getElementById('email'), 'emailScramble', 'dun@euuygbar.', [12, 9, 7, 6, 11, 13, 2, 8, 3, 1, 5, 4, 10]);
      </script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-32814563-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

    </body>
</html>